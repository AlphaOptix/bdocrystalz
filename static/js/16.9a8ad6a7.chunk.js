(this.webpackJsonpbdocrystalz=this.webpackJsonpbdocrystalz||[]).push([[16],{169:function(e,t,n){"use strict";n.r(t);var a=n(105),c=n(74),l=n(157),r=n(124),s=n.n(r),i=n(1),o=n(126),u=n(127),b=n(165),f=n(56),j=n(2),d=Object(i.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(12)]).then(n.bind(null,158))})),O=Object(i.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(13)]).then(n.bind(null,161))})),h=Object(i.lazy)((function(){return Promise.all([n.e(0),n.e(14)]).then(n.bind(null,162))})),p=Object(i.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(15)]).then(n.bind(null,163))})),k=Object(i.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(11)]).then(n.bind(null,164))}));var v=function(e){var t=e.crystals,n=e.setCrystals,r=e.anchor,s=e.setAnchor,v=Object(i.useState)({sockets:[],effects:[],breakChance:[],grades:[{name:"White",value:"0"},{name:"Green",value:"1"},{name:"Blue",value:"2"},{name:"Yellow",value:"3"},{name:"Orange",value:"4"}]}),m=Object(a.a)(v,2),x=m[0],y=m[1],C=Object(i.useState)(""),g=Object(a.a)(C,2),A=g[0],S=g[1],E=Object(i.useState)("All"),z=Object(a.a)(E,2),V=z[0],w=z[1],P=Object(i.useState)("All"),B=Object(a.a)(P,2),T=B[0],G=B[1],J=Object(i.useState)("All"),L=Object(a.a)(J,2),U=L[0],D=L[1],F=Object(i.useState)("All"),R=Object(a.a)(F,2),W=R[0],Y=R[1],q=Object(i.useRef)();Object(i.useEffect)((function(){function e(e){"Enter"!==e.code&&"Escape"!==e.code||s(null)}return document.addEventListener("keyup",e),function(){document.removeEventListener("keyup",e)}}),[s]),Object(i.useEffect)((function(){var e=new Set,n=new Set,a=new Set;t.forEach((function(t){a.add(t.breakChance),e.add(t.socket),t.effect.split(",").forEach((function(e){var t=e.indexOf("+");n.add(e.substr(0,t).trim())})),n.delete("")})),y((function(t){return Object(u.a)(Object(u.a)({},t),{},{breakChance:Object(o.a)(a),sockets:Object(o.a)(e).sort(),effects:Object(o.a)(n).sort()})}))}),[t]);var H=function(){s(null)};Object(i.useEffect)((function(){clearTimeout(q.current);var e=[];q.current=setTimeout((function(){e=t.filter((function(e){if(!e.name.toUpperCase().includes(A.toUpperCase()))return!1;if("All"!==V&&e.socket!==V)return!1;if("All"!==T&&e.breakChance!==T)return!1;if("All"!==W&&e.grade!==W)return!1;var t=!1;return e.effect.split(",").forEach((function(e){var n=e.indexOf("+");e.substr(0,n).trim()===U&&(t=!0)})),"All"===U||!1!==t})),n(e)}),250)}),[A,T,U,V,W,t,n]);var I=Boolean(r),K=I?"simple-popover":void 0;return Object(j.jsx)(b.a,{id:K,open:I,anchorEl:r,onClose:H,placement:"bottom-end",disablePortal:!1,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{style:{width:450,padding:"20px 0"}},children:Object(j.jsxs)(i.Suspense,{fallback:Object(j.jsx)(c.a,{style:{display:"flex",justifyContent:"center"},children:Object(j.jsx)(f.a,{disableShrink:!0,size:40})}),children:[Object(j.jsx)(h,{searchValue:A,setSearchValue:S}),Object(j.jsx)(O,{grades:x.grades,gradeValue:W,setGradeValue:Y}),Object(j.jsx)(d,{effects:x.effects,effectValue:U,setEffectValue:D}),Object(j.jsx)(k,{breakChance:x.breakChance,breakValue:T,setBreakValue:G}),Object(j.jsx)(p,{sockets:x.sockets,socketValue:V,setSocketValue:w}),Object(j.jsxs)(c.a,{style:{textAlign:"right",paddingTop:10},children:[Object(j.jsx)(l.a,{color:"secondary",onClick:function(){S(""),D("All"),G("All"),w("All"),Y("All")},children:"Clear All"}),Object(j.jsx)(l.a,{onClick:H,children:"Close"})]})]})})};t.default=function(e){var t=e.crystals,n=e.setCrystals,r=Object(i.useState)(null),o=Object(a.a)(r,2),u=o[0],b=o[1];return Object(j.jsxs)(c.a,{style:{display:"flex",justifyContent:"flex-end",flexDirection:"row",paddingBottom:10},disableGutters:!0,children:[Object(j.jsxs)(l.a,{variant:"contained",disableElevation:!0,onClick:function(e){b(u?null:e.currentTarget)},children:[Object(j.jsx)(s.a,{})," Filter"]}),Object(j.jsx)(v,{crystals:t,setCrystals:n,anchor:u,setAnchor:b})]})}}}]);
//# sourceMappingURL=16.9a8ad6a7.chunk.js.map