(this["webpackJsonpbdocrystalz-react"]=this["webpackJsonpbdocrystalz-react"]||[]).push([[15],{168:function(e,t,n){"use strict";n.r(t);var a=n(105),c=n(74),r=n(157),l=n(124),s=n.n(l),i=n(1),o=n(126),u=n(127),b=n(164),f=n(56),j=n(2),d=Object(i.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(11)]).then(n.bind(null,158))})),O=Object(i.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(12)]).then(n.bind(null,161))})),h=Object(i.lazy)((function(){return Promise.all([n.e(0),n.e(13)]).then(n.bind(null,162))})),p=Object(i.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(14)]).then(n.bind(null,163))}));var v=function(e){var t=e.crystals,n=e.setCrystals,l=e.anchor,s=e.setAnchor,v=Object(i.useState)({sockets:[],effects:[],breakChance:[],grades:[{name:"White",value:"0"},{name:"Green",value:"1"},{name:"Blue",value:"2"},{name:"Yellow",value:"3"},{name:"Orange",value:"4"}]}),m=Object(a.a)(v,2),x=m[0],y=m[1],k=Object(i.useState)(""),C=Object(a.a)(k,2),g=C[0],A=C[1],S=Object(i.useState)("All"),E=Object(a.a)(S,2),z=E[0],w=E[1],V=Object(i.useState)("All"),P=Object(a.a)(V,2),T=P[0],B=P[1],G=Object(i.useState)("All"),J=Object(a.a)(G,2),L=J[0],U=J[1],D=Object(i.useState)("All"),F=Object(a.a)(D,2),R=F[0],W=F[1],Y=Object(i.useRef)();Object(i.useEffect)((function(){function e(e){"Enter"!==e.code&&"Escape"!==e.code||s(null)}return document.addEventListener("keyup",e),function(){document.removeEventListener("keyup",e)}}),[s]),Object(i.useEffect)((function(){var e=new Set,n=new Set,a=new Set;t.forEach((function(t){a.add(t.breakChance),e.add(t.socket),t.effect.split(",").forEach((function(e){var t=e.indexOf("+");n.add(e.substr(0,t).trim())})),n.delete("")})),y((function(t){return Object(u.a)(Object(u.a)({},t),{},{breakChance:Object(o.a)(a),sockets:Object(o.a)(e).sort(),effects:Object(o.a)(n).sort()})}))}),[t]);var q=function(){s(null)};Object(i.useEffect)((function(){clearTimeout(Y.current);var e=[];Y.current=setTimeout((function(){e=t.filter((function(e){if(!e.name.toUpperCase().includes(g.toUpperCase()))return!1;if("All"!==z&&e.socket!==z)return!1;if("All"!==T&&e.breakChance!==T)return!1;if("All"!==R&&e.grade!==R)return!1;var t=!1;return e.effect.split(",").forEach((function(e){var n=e.indexOf("+");e.substr(0,n).trim()===L&&(t=!0)})),"All"===L||!1!==t})),n(e)}),250)}),[g,T,L,z,R,t,n]);var H=Boolean(l),I=H?"simple-popover":void 0;return Object(j.jsx)(b.a,{id:I,open:H,anchorEl:l,onClose:q,placement:"bottom-end",disablePortal:!1,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{style:{width:450,padding:"20px 0"}},children:Object(j.jsxs)(i.Suspense,{fallback:Object(j.jsx)(c.a,{style:{display:"flex",justifyContent:"center"},children:Object(j.jsx)(f.a,{disableShrink:!0,size:40})}),children:[Object(j.jsx)(h,{searchValue:g,setSearchValue:A}),Object(j.jsx)(O,{grades:x.grades,gradeValue:R,setGradeValue:W}),Object(j.jsx)(d,{effects:x.effects,effectValue:L,setEffectValue:U}),Object(j.jsx)(p,{sockets:x.sockets,socketValue:z,setSocketValue:w}),Object(j.jsxs)(c.a,{style:{textAlign:"right",paddingTop:10},children:[Object(j.jsx)(r.a,{color:"secondary",onClick:function(){A(""),U("All"),B("All"),w("All"),W("All")},children:"Clear All"}),Object(j.jsx)(r.a,{onClick:q,children:"Close"})]})]})})};t.default=function(e){var t=e.crystals,n=e.setCrystals,l=Object(i.useState)(null),o=Object(a.a)(l,2),u=o[0],b=o[1];return Object(j.jsxs)(c.a,{style:{display:"flex",justifyContent:"flex-end",flexDirection:"row",paddingBottom:10},disableGutters:!0,children:[Object(j.jsxs)(r.a,{variant:"contained",disableElevation:!0,onClick:function(e){b(u?null:e.currentTarget)},children:[Object(j.jsx)(s.a,{})," Filter"]}),Object(j.jsx)(v,{crystals:t,setCrystals:n,anchor:u,setAnchor:b})]})}}}]);
//# sourceMappingURL=15.9c875554.chunk.js.map